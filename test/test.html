<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>WebAPK åŠŸèƒ½æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cream: '#F9F7F5',
                        'cream-dark': '#F0EDE8',
                        'warm-gray': '#E8E4DE',
                        charcoal: '#2D2D2D',
                        accent: '#D4A373',
                        'accent-dark': '#B8956A',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    <style>
        /* éšè—æ–‡ä»¶è¾“å…¥ */
        input[type="file"] {
            display: none;
        }

        /* æ»šåŠ¨æ¡ç¾åŒ– */
        ::-webkit-scrollbar {
            display: none;
        }

        /* Tab æ»šåŠ¨å®¹å™¨ */
        .tabs-container {
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        /* è§†é¢‘å®¹å™¨ */
        .plyr {
            border-radius: 12px;
            overflow: hidden;
        }
    </style>
</head>

<body class="bg-cream min-h-screen">
    <!-- é¡¶éƒ¨å›ºå®šåŒºåŸŸ -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-cream/95 backdrop-blur-sm border-b border-warm-gray/50">
        <!-- æ ‡é¢˜æ  -->
        <div class="px-4 py-3">
            <h1 class="text-xl font-bold text-charcoal">WebAPK åŠŸèƒ½æµ‹è¯•</h1>
            <p class="text-xs text-charcoal/50">æµ‹è¯•æ‰€æœ‰ JS Bridge æ¥å£</p>
        </div>
        <!-- åˆ†ç±» Tab -->
        <div class="tabs-container flex gap-2 px-4 pb-3 overflow-x-auto">
            <button onclick="switchTab('device')" id="tab-device"
                class="tab-btn flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all bg-accent text-white">
                è®¾å¤‡
            </button>
            <button onclick="switchTab('media')" id="tab-media"
                class="tab-btn flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all bg-warm-gray text-charcoal/70">
                åª’ä½“
            </button>
            <button onclick="switchTab('ui')" id="tab-ui"
                class="tab-btn flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all bg-warm-gray text-charcoal/70">
                ç•Œé¢
            </button>
            <button onclick="switchTab('network')" id="tab-network"
                class="tab-btn flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all bg-warm-gray text-charcoal/70">
                ç½‘ç»œ
            </button>
            <button onclick="switchTab('operation')" id="tab-operation"
                class="tab-btn flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all bg-warm-gray text-charcoal/70">
                è¿è¥
            </button>
        </div>
    </header>

    <!-- å†…å®¹åŒºåŸŸ -->
    <main class="pt-28 pb-8 px-4">
        <!-- ==================== è®¾å¤‡ Tab ==================== -->
        <div id="content-device" class="tab-content space-y-4">
            <!-- è®¾å¤‡ä¿¡æ¯ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“±</span>
                    è®¾å¤‡ä¿¡æ¯
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testDeviceInfo()" class="btn-secondary">è®¾å¤‡ä¿¡æ¯</button>
                    <button onclick="testDeviceId()" class="btn-secondary">è®¾å¤‡ID</button>
                    <button onclick="getAppVersion()" class="btn-secondary">APPç‰ˆæœ¬</button>
                    <button onclick="showUA()" class="btn-secondary">UA</button>
                </div>
                <div id="deviceInfoResult" class="text-sm text-charcoal/60 whitespace-pre-line break-all">ç‚¹å‡»æŒ‰é’®è·å–è®¾å¤‡ä¿¡æ¯
                </div>
            </div>

            <!-- ç”µè¯/çŸ­ä¿¡ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“</span>
                    ç”µè¯ / çŸ­ä¿¡
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testDialPhone()" class="btn-secondary">æ‹¨æ‰“ 10086</button>
                    <button onclick="testSendSMS()" class="btn-secondary">å‘çŸ­ä¿¡</button>
                </div>
                <div id="phoneResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•ç”µè¯/çŸ­ä¿¡åŠŸèƒ½</div>
            </div>

            <!-- å±å¹•å¸¸äº® & æŒ¯åŠ¨ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ’¡</span>
                    å±å¹•å¸¸äº® & æŒ¯åŠ¨
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="toggleScreenOn()" class="btn-secondary">åˆ‡æ¢å±å¹•å¸¸äº®</button>
                    <button onclick="testVibrate()" class="btn-secondary">æŒ¯åŠ¨åé¦ˆ</button>
                </div>
                <div id="deviceResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•è®¾å¤‡æ§åˆ¶</div>
            </div>

            <!-- ä½ç½® -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“</span>
                    ä½ç½®æƒé™
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="getLocation()" class="btn-secondary">è·å–å½“å‰ä½ç½®</button>
                </div>
                <div id="locationResult" class="text-sm text-charcoal/60 whitespace-pre-line">ç‚¹å‡»æŒ‰é’®è·å– GPS ä½ç½®</div>
            </div>

            <!-- ç”Ÿç‰©è¯†åˆ« -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ”</span>
                    ç”Ÿç‰©è¯†åˆ«
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testBiometric()" class="btn-secondary">æŒ‡çº¹/é¢å®¹éªŒè¯</button>
                </div>
                <div id="biometricResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•ç”Ÿç‰©è¯†åˆ«</div>
            </div>

            <!-- å‰ªè´´æ¿ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“‹</span>
                    å‰ªè´´æ¿
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testCopyClipboard()" class="btn-secondary">å¤åˆ¶æµ‹è¯•æ–‡å­—</button>
                    <button onclick="testReadClipboard()" class="btn-secondary">è¯»å–å‰ªè´´æ¿</button>
                </div>
                <div id="clipboardResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•å‰ªè´´æ¿åŠŸèƒ½</div>
            </div>
        </div>

        <!-- ==================== åª’ä½“ Tab ==================== -->
        <div id="content-media" class="tab-content space-y-4 hidden">
            <!-- JS ç›¸æœº -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“·</span>
                    JS ç›¸æœºï¼ˆéè¡¨å•ï¼‰
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testTakePhoto()" class="btn-secondary">æ‹ç…§è·å–å›¾ç‰‡</button>
                </div>
                <div id="jsCameraResult" class="text-sm text-charcoal/60">æ‹ç…§åå›¾ç‰‡å°†æ˜¾ç¤ºåœ¨ä¸‹æ–¹</div>
                <div id="jsCameraPreview" class="mt-3 hidden">
                    <div id="jsCameraContent" class="rounded-xl overflow-hidden"></div>
                </div>
            </div>

            <!-- å½•éŸ³ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ¤</span>
                    å½•éŸ³
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button id="btnStartRecord" onclick="startRecording()" class="btn-secondary">å¼€å§‹å½•éŸ³</button>
                    <button id="btnStopRecord" onclick="stopRecording()" class="btn-secondary" disabled>åœæ­¢</button>
                    <button id="btnCancelRecord" onclick="cancelRecording()" class="btn-danger" disabled>å–æ¶ˆ</button>
                </div>
                <div id="recordingResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•å½•éŸ³åŠŸèƒ½</div>
                <div id="recordingTimer" class="text-2xl font-mono text-red-500 hidden">00:00</div>
                <audio id="recordingPlayback" controls class="w-full mt-3 hidden"></audio>
            </div>

            <!-- è§†é¢‘å½•åˆ¶ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“¹</span>
                    è§†é¢‘å½•åˆ¶
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="startVideoRecording()" class="btn-secondary">å½•åˆ¶è§†é¢‘</button>
                </div>
                <div id="videoRecordingResult" class="text-sm text-charcoal/60">è°ƒç”¨ç³»ç»Ÿç›¸æœºå½•åˆ¶è§†é¢‘</div>
                <video id="videoRecordingPlayback" controls class="w-full mt-3 rounded-xl hidden"></video>
            </div>

            <!-- å›¾ç‰‡é¢„è§ˆ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ–¼ï¸</span>
                    å›¾ç‰‡é¢„è§ˆ
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testPreviewSingle()" class="btn-secondary">å•å¼ é¢„è§ˆ</button>
                    <button onclick="testPreviewMultiple()" class="btn-secondary">å¤šå›¾é¢„è§ˆ</button>
                </div>
                <div id="imagePreviewResult" class="text-sm text-charcoal/60">åŸç”Ÿå›¾ç‰‡é¢„è§ˆï¼ˆæ”¯æŒç¼©æ”¾ã€ä¿å­˜ã€åˆ†äº«ï¼‰</div>
            </div>

            <!-- è§†é¢‘å…¨å± -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ¬</span>
                    è§†é¢‘å…¨å±æ’­æ”¾
                </h3>
                <video id="player" playsinline controls class="w-full rounded-xl">
                    <source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4"
                        type="video/mp4">
                </video>
                <div class="text-sm text-charcoal/60 mt-2">ç‚¹å‡»å…¨å±æŒ‰é’®æµ‹è¯•å…¨å±åŠŸèƒ½</div>
            </div>

            <!-- åå°éŸ³é¢‘ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸµ</span>
                    åå°éŸ³é¢‘æ’­æ”¾
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="startBackgroundAudio()" class="btn-secondary">â–¶ï¸ æ’­æ”¾éŸ³ä¹</button>
                    <button onclick="stopBackgroundAudio()" class="btn-danger">â¹ï¸ åœæ­¢</button>
                </div>
                <div id="bgAudioResult" class="text-sm text-charcoal/60">åˆ‡æ¢åˆ°åå°åéŸ³ä¹åº”ç»§ç»­æ’­æ”¾</div>
                <audio id="bgAudioPlayer" loop>
                    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
                </audio>
            </div>

            <!-- æ–‡ä»¶ä¸Šä¼  -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“¤</span>
                    æ–‡ä»¶ä¸Šä¼ 
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <label class="btn-secondary cursor-pointer">ğŸ“· æ‹ç…§<input type="file" accept="image/*"
                            capture="camera" id="cameraInput"></label>
                    <label class="btn-secondary cursor-pointer">ğŸ–¼ï¸ ç›¸å†Œ<input type="file" accept="image/*"
                            id="imageInput"></label>
                    <label class="btn-secondary cursor-pointer">ğŸ¬ è§†é¢‘<input type="file" accept="video/*"
                            id="videoInput"></label>
                    <label class="btn-secondary cursor-pointer">ğŸ“ æ–‡ä»¶<input type="file" id="fileInput"></label>
                </div>
                <div id="uploadPreview" class="hidden">
                    <div id="previewContent" class="rounded-xl overflow-hidden"></div>
                    <div id="fileInfo" class="text-sm text-charcoal/60 mt-2 whitespace-pre-line"></div>
                </div>
            </div>

            <!-- æ–‡ä»¶ä¸‹è½½ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“¥</span>
                    æ–‡ä»¶ä¸‹è½½
                </h3>
                <div class="flex flex-wrap gap-2">
                    <a href="https://kanban.ehafo.com/article_attachment/1823_1763618663702_0/PRD%E8%A7%84%E8%8C%83.pdf"
                        class="btn-secondary">ğŸ“„ PDF</a>
                    <a href="https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-zip-file.zip"
                        class="btn-secondary">ğŸ“¦ ZIP</a>
                    <a href="https://calibre-ebook.com/downloads/demos/demo.docx" class="btn-secondary">ğŸ“ Word</a>
                    <a href="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" class="btn-secondary">ğŸµ
                        MP3</a>
                </div>
            </div>
        </div>

        <!-- ==================== ç•Œé¢ Tab ==================== -->
        <div id="content-ui" class="tab-content space-y-4 hidden">
            <!-- çŠ¶æ€æ é¢œè‰² -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ¨</span>
                    çŠ¶æ€æ é¢œè‰²
                </h3>
                <div class="flex flex-wrap gap-2">
                    <button onclick="changeColor('#FF0000')" class="w-11 h-10 rounded-xl bg-red-500"></button>
                    <button onclick="changeColor('#000000')" class="w-11 h-10 rounded-xl bg-black"></button>
                    <button onclick="changeColor('#FFFFFF')"
                        class="w-11 h-10 rounded-xl bg-white border border-warm-gray"></button>
                    <button onclick="changeColor('#D4A373')" class="w-11 h-10 rounded-xl bg-accent"></button>
                    <button onclick="changeColor('#3B82F6')" class="w-11 h-10 rounded-xl bg-blue-500"></button>
                    <button onclick="changeColor('#10B981')" class="w-11 h-10 rounded-xl bg-green-500"></button>
                </div>
            </div>

            <!-- å­—ä½“ç¼©æ”¾ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ”¤</span>
                    å­—ä½“ç¼©æ”¾
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="getTextZoom()" class="btn-secondary">ğŸ“ æŸ¥çœ‹ç¼©æ”¾</button>
                </div>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="setTextZoom(75)" class="btn-secondary text-xs">75%</button>
                    <button onclick="setTextZoom(100)" class="btn-secondary">100%</button>
                    <button onclick="setTextZoom(125)" class="btn-secondary">125%</button>
                    <button onclick="setTextZoom(150)" class="btn-secondary">150%</button>
                </div>
                <div id="fontResult" class="text-sm text-charcoal/60">é»˜è®¤è·Ÿéšç³»ç»Ÿå­—ä½“å¤§å°è®¾ç½®</div>
            </div>

            <!-- JS å¼¹çª— -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ’¬</span>
                    JS å¼¹çª—
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testAlert()" class="btn-secondary">â„¹ï¸ alert()</button>
                    <button onclick="testConfirm()" class="btn-secondary">â“ confirm()</button>
                    <button onclick="testPrompt()" class="btn-secondary">âœï¸ prompt()</button>
                </div>
                <div id="jsResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯• JS åŸç”Ÿå¼¹çª—</div>
            </div>

            <!-- é˜²æˆªå± -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ”’</span>
                    é˜²æˆªå±
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="enableSecureMode()" class="btn-secondary">ğŸ”’ å¼€å¯é˜²æˆªå±</button>
                    <button onclick="disableSecureMode()" class="btn-danger">ğŸ”“ å…³é—­é˜²æˆªå±</button>
                </div>
                <div id="secureResult" class="text-sm text-charcoal/60">å¼€å¯åå°è¯•æˆªå±ï¼Œæˆªå›¾å°†æ˜¾ç¤ºé»‘å±</div>
            </div>

            <!-- ç¼“å­˜æ¸…ç† -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ§¹</span>
                    ç¼“å­˜æ¸…ç†
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="clearCache()" class="btn-secondary">ğŸ—‘ï¸ æ¸…ç†ç¼“å­˜</button>
                </div>
                <div id="cacheResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æ¸…ç† WebView ç¼“å­˜</div>
            </div>
        </div>

        <!-- ==================== ç½‘ç»œ Tab ==================== -->
        <div id="content-network" class="tab-content space-y-4 hidden">
            <!-- ç½‘ç»œçŠ¶æ€ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸŒ</span>
                    ç½‘ç»œçŠ¶æ€
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="checkNetwork()" class="btn-secondary">ğŸ” æŸ¥è¯¢ç½‘ç»œçŠ¶æ€</button>
                </div>
                <div id="networkResult" class="text-sm text-charcoal/60">ç½‘ç»œçŠ¶æ€ä¼šå®æ—¶æ›´æ–°</div>
            </div>

            <!-- é€šçŸ¥ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ””</span>
                    æœ¬åœ°é€šçŸ¥
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="sendNotification()" class="btn-secondary">ğŸ“© ç«‹å³é€šçŸ¥</button>
                    <button onclick="scheduleNotification()" class="btn-secondary">â° 5ç§’åæé†’</button>
                </div>
                <div id="notifyResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•é€šçŸ¥åŠŸèƒ½</div>
            </div>

            <!-- å‰å°æœåŠ¡ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ””</span>
                    å‰å°æœåŠ¡ï¼ˆä¿æ´»ï¼‰
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="startFgService()" class="btn-secondary">â–¶ï¸ å¯åŠ¨</button>
                    <button onclick="updateFgNotification()" class="btn-secondary">ğŸ”„ æ›´æ–°é€šçŸ¥</button>
                    <button onclick="stopFgService()" class="btn-danger">â¹ï¸ åœæ­¢</button>
                </div>
                <div id="fgServiceResult" class="text-sm text-charcoal/60">é€‚ç”¨äºéŸ³ä¹æ’­æ”¾ã€å¯¼èˆªç­‰éœ€è¦åå°è¿è¡Œçš„åœºæ™¯</div>
            </div>
        </div>

        <!-- ==================== è¿è¥ Tab ==================== -->
        <div id="content-operation" class="tab-content space-y-4 hidden">
            <!-- æ‰«ç  -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“¸</span>
                    æ‰«ç 
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="scanQRCode()" class="btn-secondary">ğŸ” æ‰«æäºŒç»´ç </button>
                </div>
                <div id="scanResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®å¼€å§‹æ‰«ç </div>
            </div>

            <!-- åˆ†äº« -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“¤</span>
                    ç³»ç»Ÿåˆ†äº«
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testShare()" class="btn-secondary">ğŸ“¤ åˆ†äº«åˆ°...</button>
                </div>
                <div id="shareResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•åˆ†äº«åŠŸèƒ½</div>
            </div>

            <!-- æ¡Œé¢å°ç»„ä»¶ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“Œ</span>
                    æ¡Œé¢å°ç»„ä»¶
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testUpdateWidget()" class="btn-secondary">ğŸ”„ æ›´æ–°å†…å®¹</button>
                    <button onclick="testPinWidget()" class="btn-secondary">ğŸ“Œ æ·»åŠ åˆ°æ¡Œé¢</button>
                </div>
                <div id="widgetResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯•æ¡Œé¢å°ç»„ä»¶</div>
            </div>

            <!-- åº”ç”¨è¯„åˆ† -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">â­</span>
                    åº”ç”¨è¯„åˆ†
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testOpenPlayStore()" class="btn-secondary">â­ è·³è½¬ Google Play</button>
                </div>
                <div id="rateResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°åº”ç”¨å•†åº—è¯„åˆ†é¡µé¢</div>
            </div>

            <!-- åº”ç”¨æ›´æ–° -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ”„</span>
                    åº”ç”¨å†…æ›´æ–°
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="checkAppVersion()" class="btn-secondary">ğŸ“¦ ç‰ˆæœ¬</button>
                    <button onclick="checkInstallPermission()" class="btn-secondary">ğŸ” æƒé™</button>
                    <button onclick="requestInstallPermission()" class="btn-secondary">ğŸ“ æˆæƒ</button>
                </div>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testDownloadUpdate()" class="btn-secondary">â¬ ä¸‹è½½æ›´æ–°</button>
                    <button onclick="testInstallUpdate()" class="btn-secondary">ğŸ“² å®‰è£…æ›´æ–°</button>
                </div>
                <div id="updateResult" class="text-sm text-charcoal/60">ç½‘é¡µæ§åˆ¶æ›´æ–°æµç¨‹</div>
            </div>

            <!-- ç¬¬ä¸‰æ–¹ç™»å½• -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ”‘</span>
                    ç¬¬ä¸‰æ–¹ç™»å½•
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testGoogleLogin()" class="btn-secondary">ğŸŒ Google ç™»å½•</button>
                    <button onclick="loginWechat()" class="btn-secondary opacity-50">ğŸ’¬ å¾®ä¿¡ç™»å½•</button>
                </div>
                <div id="loginResult" class="text-sm text-charcoal/60">Google ä»…æµ·å¤–å¯ç”¨</div>
            </div>

            <!-- APP å”¤ç«¯ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ“²</span>
                    APP å”¤ç«¯
                </h3>
                <div class="flex flex-wrap gap-2 mb-3">
                    <button onclick="testOpenTaobao()" class="btn-secondary">ğŸ›’ æ·˜å®</button>
                    <button onclick="testOpenWeixin()" class="btn-secondary">ğŸ’¬ å¾®ä¿¡</button>
                    <button onclick="testOpenMap()" class="btn-secondary">ğŸ—ºï¸ åœ°å›¾å¯¼èˆª</button>
                </div>
                <div id="openAppResult" class="text-sm text-charcoal/60">ç‚¹å‡»æŒ‰é’®æµ‹è¯• APP å”¤ç«¯åŠŸèƒ½</div>
            </div>

            <!-- å¤–éƒ¨é“¾æ¥ -->
            <div class="bg-white rounded-2xl p-4 shadow-sm border border-warm-gray/30">
                <h3 class="font-semibold text-charcoal mb-3 flex items-center gap-2">
                    <span class="w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center">ğŸ”—</span>
                    å¤–éƒ¨é“¾æ¥
                </h3>
                <div class="flex flex-wrap gap-2">
                    <a href="https://www.ehafo.com" class="btn-secondary">ğŸ” æ‰“å¼€æ˜“å“ˆä½›</a>
                </div>
                <div class="text-sm text-charcoal/60 mt-3">å¤–åŸŸé“¾æ¥å°†åœ¨å†…ç½®æµè§ˆå™¨ä¸­æ‰“å¼€</div>
            </div>
        </div>
    </main>

    <!-- æŒ‰é’®æ ·å¼ -->
    <style>
        .btn-secondary {
            padding: 0.5rem 1rem;
            background-color: #E8E4DE;
            color: #2D2D2D;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 0.75rem;
            transition: all 0.15s;
        }

        .btn-secondary:hover {
            background-color: #F0EDE8;
        }

        .btn-danger {
            padding: 0.5rem 1rem;
            background-color: #FEE2E2;
            color: #DC2626;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 0.75rem;
            transition: all 0.15s;
        }

        .btn-danger:hover {
            background-color: #FECACA;
        }

        .btn-secondary:disabled,
        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* å›¾ç‰‡é¢„è§ˆæ ·å¼ */
        #jsCameraContent img,
        #previewContent img {
            max-width: 100%;
            max-height: 200px;
            object-fit: contain;
        }

        #previewContent video {
            max-height: 200px;
        }
    </style>

    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script src="scripts.js?v=2.0.0"></script>
    <script>
        // Tab åˆ‡æ¢
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰å†…å®¹
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            // æ˜¾ç¤ºå½“å‰å†…å®¹
            document.getElementById('content-' + tabName).classList.remove('hidden');

            // æ›´æ–° Tab æ ·å¼
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-accent', 'text-white');
                btn.classList.add('bg-warm-gray', 'text-charcoal/70');
            });
            const activeTab = document.getElementById('tab-' + tabName);
            activeTab.classList.remove('bg-warm-gray', 'text-charcoal/70');
            activeTab.classList.add('bg-accent', 'text-white');
        }

        // å›¾ç‰‡é¢„è§ˆæ˜¾ç¤ºå¤„ç†
        const originalOnCameraResult = window.onCameraResult;
        window.onCameraResult = function (dataUrl) {
            showResult('jsCameraResult', 'âœ… æ‹ç…§æˆåŠŸï¼');
            const preview = document.getElementById('jsCameraPreview');
            const content = document.getElementById('jsCameraContent');
            preview.classList.remove('hidden');
            content.innerHTML = `<img src="${dataUrl}" alt="æ‹ç…§ç»“æœ" class="rounded-xl">`;
        };

        // æ–‡ä»¶ä¸Šä¼ é¢„è§ˆå¤„ç†
        function handleFile(input, type) {
            const file = input.files[0];
            if (!file) return;

            const preview = document.getElementById('uploadPreview');
            const content = document.getElementById('previewContent');
            const info = document.getElementById('fileInfo');

            preview.classList.remove('hidden');
            info.textContent = `æ–‡ä»¶å: ${file.name}\nå¤§å°: ${(file.size / 1024).toFixed(1)} KB\nç±»å‹: ${file.type || 'æœªçŸ¥'}`;

            if (type === 'image' || (type === 'auto' && file.type.startsWith('image/'))) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    content.innerHTML = `<img src="${e.target.result}" alt="é¢„è§ˆ" class="rounded-xl">`;
                };
                reader.readAsDataURL(file);
            } else if (type === 'video' || (type === 'auto' && file.type.startsWith('video/'))) {
                const url = URL.createObjectURL(file);
                content.innerHTML = `<video src="${url}" controls class="rounded-xl w-full"></video>`;
            } else {
                content.innerHTML = '<div class="text-center py-8 text-charcoal/50"><div class="text-4xl mb-2">ğŸ“</div><div>æ–‡ä»¶å·²é€‰æ‹©</div></div>';
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function () {
            // ç»‘å®šæ–‡ä»¶ä¸Šä¼ äº‹ä»¶
            const cameraInput = document.getElementById('cameraInput');
            const imageInput = document.getElementById('imageInput');
            const videoInput = document.getElementById('videoInput');
            const fileInput = document.getElementById('fileInput');

            if (cameraInput) cameraInput.addEventListener('change', function () { handleFile(this, 'image'); });
            if (imageInput) imageInput.addEventListener('change', function () { handleFile(this, 'image'); });
            if (videoInput) videoInput.addEventListener('change', function () { handleFile(this, 'video'); });
            if (fileInput) fileInput.addEventListener('change', function () { handleFile(this, 'auto'); });

            // åˆå§‹åŒ– Plyr æ’­æ”¾å™¨
            if (typeof Plyr !== 'undefined') {
                const player = document.getElementById('player');
                if (player) new Plyr(player);
            }

            // æ›´æ–°å°ç»„ä»¶
            if (typeof Web2APK !== 'undefined') {
                try {
                    Web2APK.updateWidget(JSON.stringify({
                        title: "åŠŸèƒ½æµ‹è¯•",
                        content: "ç‚¹å‡»æ‰“å¼€æµ‹è¯•é¡µ",
                        icon: "ğŸ§ª"
                    }));
                } catch (e) { }
            }
        });
    </script>
</body>

</html>