# 网页转APK生成器 - 待办功能

## 高优先级

- [x] **屏幕方向选择** - 支持竖屏锁定、横屏锁定、自由旋转三种模式
- [x] **启动画面（Splash Screen）** - 复用应用图标 + 自定义背景色，圆角显示，300ms淡出
- [x] **全屏模式选项** - 隐藏状态栏的沉浸式体验，适合游戏/视频类应用
- [x] **版本号配置** - 更新APP时可配置版本号，versionCode自动生成

## 中优先级

- [x] **状态栏颜色** - 允许用户自定义状态栏颜色
- [x] **下拉刷新** - SwipeRefreshLayout 实现下拉刷新
- [x] **离线错误页面** - 统一处理网络错误，支持重试和退出应用，优化无网检测逻辑

## 可选功能

### 高
- [x] **文件下载支持** - 拦截下载链接，调用系统下载管理器（PDF、图片等）
- [x] **文件上传支持** - 网页选择文件/拍照上传（头像、附件等）

### 中
- [x] **视频全屏播放** - HTML5视频点击全屏按钮后正常全屏
- [x] **外部链接处理** - 外域链接用内置浏览器打开，避免用户迷失
- [x] **JS弹窗支持** - 实现 alert/confirm/prompt 原生弹窗
- [x] **位置权限支持** - 网页需要时运行时请求，支持地图、定位等功能

### 低
- [x] **User-Agent 标识** - 自动附加 Web2APK/1.0 标识，方便网站统计识别来源

---

## 规划中

### 高性价比（简单实现）
- [x] **系统分享** - 调用系统分享面板，分享链接/文字到微信、QQ等
- [x] **网络状态监听** - 检测网络变化，实时回调 + 主动查询
- [x] **屏幕常亮** - 网页可控制屏幕常亮（考试、导航等场景）
- [x] **振动反馈** - 网页可触发振动反馈

### 中等难度
- [x] **扫码功能** - 调用摄像头扫描二维码/条形码
- [x] **本地通知** - 定时提醒、闹钟类通知

### 体验增强（强烈建议）
- [x] **缓存清理** - JS 接口清理 WebView 缓存（解决网页更新不及时问题）
- [x] **深色模式** - 状态栏/启动页跟随系统深色模式，WebView 自动适配
- [x] **动态状态栏** - 支持 JS/Meta 标签动态修改状态栏颜色

### 复杂（需后端/第三方服务）
- [ ] **推送通知** - 远程消息推送
  - [x] FCM 推送（海外）- Firebase Cloud Messaging，上传 google-services.json 即可 [控制台](https://console.firebase.google.com/)
  - [ ] 极光推送（国内）- 聚合厂商通道，到达率高 [申请地址](https://www.jiguang.cn/)
  - [ ] 个推（国内）- 备选方案 [申请地址](https://www.getui.com/)
- [ ] **微信登录** - 微信授权登录（需企业资质）[申请地址](https://open.weixin.qq.com/)
- [ ] **支付功能** - 微信/支付宝支付（需商户账号）

### 高级功能（海外）
- [x] **Google 登录** - Google 账号一键登录（海外可用，个人可申请）[申请地址](https://console.cloud.google.com/)

### 基础架构
- [x] **目标市场切换** - 海外/中国大陆一键切换，自动匹配对应功能配置

---

## 运营规划（提升留存/唤醒/体验）

### 强烈推荐
- [x] **快捷方式 (Shortcuts)** - 长按图标弹出快捷入口（扫码、我的订单等），简单有效不惹人烦
- [x] **深度链接 (Deep Links)** - 从微信/短信/浏览器点击网址直接打开 APP 并跳转到对应页面，营销利器
- [x] **分享目标 (Share Target)** - 其他 APP 分享链接时可选择本 APP 内置浏览器打开，增加曝光

### 推荐
- [x] **画中画 (PiP)** - 视频播放时按 Home 键（或使用全面屏手势上滑回桌面）变小窗悬浮，视频类 APP 必备

### 可选
- [x] **桌面组件 (Widget)** - 桌面显示网页内容摘要，如天气/待办/新闻类（小米需要手动开启桌面快捷方式权限）

### 不推荐
- [x] **通知栏常驻 (Foreground Service)** - JS可控的前台服务，适用于音乐/导航等场景

---

## 待规划（参考头部APP）

### 高性价比
- [x] **剪贴板操作** - 复制/读取剪贴板（淘宝口令、抖音链接、邀请码等场景）
- [ ] **应用内评分** - 弹出 Google Play 评分对话框，不跳出 APP，提升商店排名（海外有用，需上架google play）

### 中等价值
- [x] **生物识别** - 指纹/面容验证（支付、登录场景，提升安全感）

---

## 功能实现路线图

### Phase 1：快速补全（1-2天/项）

| 功能 | 说明 | 难度 | 状态 |
|------|------|------|------|
| 📱 **设备信息接口** | JS 获取设备唯一ID、型号、系统版本 | ⭐ | ✅ 已完成 |
| 📧 **拨打电话/发短信** | Intent 调用系统电话/短信应用 | ⭐ | ✅ 已完成 |
| ⭐ **应用内评分** | 跳转 Google Play 商店评分页面 | ⭐ | ✅ 已完成 |
| 📷 **JS 相机接口** | 非表单的拍照能力，直接返回图片 | ⭐⭐ | ✅ 已完成 |

### Phase 2：核心补充（3-5天/项）

| 功能 | 说明 | 难度 | 状态 |
|------|------|------|------|
| 📲 **APP 唤端** | 打开微信/支付宝/其他已安装APP | ⭐⭐ | 待开发 |
| 🎤 **录音功能** | 录制音频并提供给网页 | ⭐⭐⭐ | ✅ 已完成 |
| 🔊 **音频后台播放** | 配合前台服务后台播放 | ⭐⭐ | ✅ 已完成 |
| 🖼️ **图片预览** | 原生图片查看器，长按保存/分享 | ⭐⭐ | ✅ 已完成 |

### Phase 3：商业能力（需第三方服务）

| 功能 | 说明 | 难度 | 状态 |
|------|------|------|------|
| 📬 **极光推送** | 国内聚合推送，厂商通道到达率高 | ⭐⭐⭐⭐ | 待开发 |
| 📱 **微信登录** | 微信授权登录（需企业资质+后端）| ⭐⭐⭐⭐ | 待开发 |
| 💳 **支付功能** | 微信支付/支付宝支付（需商户账号）| ⭐⭐⭐⭐⭐ | 待开发 |
| 📊 **埋点统计** | 友盟/神策等 SDK 集成 | ⭐⭐⭐ | 待开发 |

### Phase 4：高级功能（按需实现）

| 功能 | 说明 | 难度 | 状态 |
|------|------|------|------|
| 📍 **后台定位** | 持续获取位置（外卖、运动类）| ⭐⭐⭐ | 待开发 |
| 📹 **视频录制** | 录制视频并上传 | ⭐⭐⭐ | 待开发 |
| 🔐 **安全键盘** | 支付密码输入时防截屏 | ⭐⭐⭐⭐ | 待开发 |
| 📥 **热更新** | 网页资源本地缓存+增量更新 | ⭐⭐⭐⭐ | 待开发 |
| 📶 **蓝牙通信** | 连接蓝牙设备（IoT 场景）| ⭐⭐⭐⭐ | 待开发 |
| 📡 **NFC 读写** | 读写 NFC 标签（门禁/支付）| ⭐⭐⭐ | 待开发 |

---

## 与竞品功能对比

| 功能 | Web2APK | Capacitor | Cordova | DCloud |
|------|---------|-----------|---------|--------|
| **基础能力** |
| 文件上传/下载 | ✅ | ✅ | ✅ | ✅ |
| 视频全屏播放 | ✅ | ✅ | ✅ | ✅ |
| JS 弹窗支持 | ✅ | ✅ | ✅ | ✅ |
| 位置权限 | ✅ | ✅ | ✅ | ✅ |
| **运营增强** |
| 深度链接 | ✅ | ✅ | 插件 | ✅ |
| 画中画 | ✅ | ❌ | ❌ | ❌ |
| 桌面小组件 | ✅ | ❌ | ❌ | ✅ |
| 快捷方式 | ✅ | ❌ | ❌ | ✅ |
| **JS 接口** |
| 系统分享 | ✅ | ✅ | ✅ | ✅ |
| 网络状态 | ✅ | ✅ | ✅ | ✅ |
| 扫码功能 | ✅ | 插件 | 插件 | ✅ |
| 本地通知 | ✅ | 插件 | 插件 | ✅ |
| 剪贴板 | ✅ | ✅ | ✅ | ✅ |
| 生物识别 | ✅ | 插件 | 插件 | ✅ |
| 设备信息 | ✅ | ✅ | ✅ | ✅ |
| 相机 API | ✅ | ✅ | ✅ | ✅ |
| 录音 | ✅ | ✅ | ✅ | ✅ |
| **登录/推送** |
| Google 登录 | ✅ | 插件 | 插件 | ✅ |
| FCM 推送 | ✅ | 插件 | 插件 | ✅ |
| 微信登录 | ❌ | 插件 | 插件 | ✅ |
| 国内推送 | ❌ | ❌ | 插件 | ✅ |
| 支付功能 | ❌ | ❌ | 插件 | ✅ |
| **开发体验** |
| 免费开源 | ✅ | ✅ | ✅ | 部分 |
| 无需 Node.js | ✅ | ❌ | ❌ | ❌ |
| 一键生成 APK | ✅ | ❌ | ❌ | ❌ |
| 可视化配置 | ✅ | ❌ | ❌ | ✅ |
